<!DOCTYPE html>
<html lang="en">
<head>
    {% include 'std_elements/head.html' %}

    <script src="https://cdn.jsdelivr.net/npm/echarts@5.6.0/dist/echarts.min.js"></script>

    <!-- Custom statics -->
    <link rel="stylesheet" href="/static/css/dynamic.css">
  
    <title>3TH - Statistik</title>
</head>
<body class="layout-wrapper" data-layout="dashboard">
  
    <h1>üìä Statistik-Dashboard</h1>

    <form id="filters"
        hx-post="{{ url_for('analytics_bp.chart_events_per_category') }}"
        hx-trigger="change"
        hx-target="#chart-events-category"
        hx-swap="innerHTML"
        hx-indicator="#chart-loading">

        <label for="start">Von:</label>
        <input type="date" name="start_date" id="start" value="{{ start_date_prefill }}">
        <label for="end">Bis:</label>
        <input type="date" name="end_date" id="end" value="{{ end_date_prefill }}">

        <label for="category">Kategorie:</label>
        <select name="game_category_id" id="category">
        <option value="">Alle</option>
            {% for cat in game_categories %}
                <option value="{{ cat.id }}">{{ cat.name }}</option>
            {% endfor %}
        </select>

        <label for="event-type">Event Typ:</label>
        <select name="event_type_id" id="event-type">
        <option value="">Alle</option>
            {% for et in event_types %}
            <option value="{{ et.id }}">{{ et.name }}</option>
            {% endfor %}
        </select>

        {% if is_admin %}
            <label for="user">Benutzer:</label>
            <select name="user_id" id="user">
                <option value="">Alle</option>
                {% for user in users %}
                    <option value="{{ user.id }}">{{ user.username }}</option>
                {% endfor %}
            </select>
        {% else %}
            <input type="hidden" name="user_id" value="{{ user_id }}">
        {% endif %}

        
</form>

<div id="chart-loading" style="display:none;">‚è≥ L√§dt...</div>
<div id="chart-events-category"></div>


</body>
</html>
