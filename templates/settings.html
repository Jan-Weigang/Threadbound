<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Settings</title>
    <link rel="stylesheet" href="/static/css/mycalendar.css">
</head>
<body>
    <h1>Game Category Channel Settings</h1>

    <form action="{{ url_for('main.settings') }}" method="post">
        {% for category in game_categories %}
            <div>
                <label for="category-{{ category.id }}">{{ category.name }}</label>
                <select name="{{ category.id }}" id="category-{{ category.id }}">
                    <option value="">-- Select a Channel --</option>
                    {% for channel in discord_channels %}
                        <option value="{{ channel.id }}" 
                            {% if category.discord_channel_id == channel.id %} selected {% endif %}>
                            {{ channel.name }} (ID: {{ channel.discord_channel_id }})
                        </option>
                    {% endfor %}
                </select>
            </div>
        {% endfor %}


        <h2>Event Types (Block Posting)</h2>
        {% for etype in event_types %}
            <div>
                <label>
                    <input type="checkbox" name="etype_block_{{ etype.id }}" {% if etype.should_not_post_to_discord %}checked{% endif %}>
                    {{ etype.name }}
                </label>
            </div>
        {% endfor %}

        <h2>Publicity Levels (Block Posting)</h2>
        {% for publicity in publicities %}
            <div>
                <label>
                    <input type="checkbox" name="publicity_block_{{ publicity.id }}" {% if publicity.should_not_post_to_discord %}checked{% endif %}>
                    {{ publicity.name }}
                </label>
            </div>
        {% endfor %}

        
        <button type="submit">Save Settings</button>
    </form>

    {% with messages = get_flashed_messages(with_categories=true) %}
        {% if messages %}
            <ul>
            {% for category, message in messages %}
                <li class="{{ category }}">{{ message }}</li>
            {% endfor %}
            </ul>
        {% endif %}
    {% endwith %}
</body>
</html>
